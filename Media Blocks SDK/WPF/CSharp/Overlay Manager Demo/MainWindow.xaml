<Window x:Class="Overlay_Manager_Demo.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Overlay_Manager_Demo"
        xmlns:wpf="clr-namespace:VisioForge.Core.UI.WPF;assembly=VisioForge.Core"
        mc:Ignorable="d"
        Title="Media Blocks SDK .Net - Overlay Manager Demo"
        Height="600" Width="900" MinHeight="500" MinWidth="800"
        Loaded="Window_Loaded" Closing="Window_Closing" Icon="visioforge_main_icon.ico">

    <DockPanel LastChildFill="True">
        <!-- Top: File Selection Panel -->
        <Border DockPanel.Dock="Top" BorderBrush="LightGray" BorderThickness="0,0,0,1" Padding="10,10,10,5">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0" Orientation="Vertical" Margin="0,0,10,0">
                    <Label Content="File name" Padding="0,0,0,2"/>
                </StackPanel>

                <TextBox Grid.Column="1"
                         x:Name="edFilename"
                         Text="C:\samples\!video.mp4"
                         VerticalAlignment="Center"
                         Margin="0,0,5,0"/>

                <Button Grid.Column="2"
                        x:Name="btSelectFile"
                        Content="Browse..."
                        Width="75"
                        Height="24"
                        VerticalAlignment="Center"
                        Click="btSelectFile_Click"/>
            </Grid>
        </Border>

        <!-- Main Content Area -->
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" MinWidth="400"/>
                <ColumnDefinition Width="320" MinWidth="280"/>
            </Grid.ColumnDefinitions>

            <!-- Left Panel: Video View and Controls -->
            <DockPanel Grid.Column="0" Margin="10,10,5,10">
                <!-- Playback Controls at Bottom -->
                <Border DockPanel.Dock="Bottom"
                        BorderBrush="LightGray"
                        BorderThickness="0,1,0,0"
                        Margin="0,10,0,0"
                        Padding="0,10,0,0">
                    <StackPanel>
                        <!-- Timeline -->
                        <Grid Margin="0,0,0,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <Slider Grid.Column="0"
                                    x:Name="tbTimeline"
                                    VerticalAlignment="Center"
                                    ValueChanged="tbTimeline_ValueChanged"/>

                            <TextBlock Grid.Column="1"
                                       x:Name="lbTime"
                                       Text="00:00:00/00:00:00"
                                       VerticalAlignment="Center"
                                       Margin="10,0,0,0"
                                       MinWidth="120"/>
                        </Grid>

                        <!-- Control Buttons -->
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                            <Button x:Name="btStart"
                                    Content="Start"
                                    Width="80"
                                    Height="30"
                                    Margin="0,0,10,0"
                                    Click="btStart_Click"/>

                            <Button x:Name="btStop"
                                    Content="Stop"
                                    Width="80"
                                    Height="30"
                                    Click="btStop_Click"/>
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!-- Video View -->
                <Border BorderBrush="Black" BorderThickness="1">
                    <wpf:VideoView x:Name="VideoView1"/>
                </Border>
            </DockPanel>

            <!-- Right Panel: Overlays Management -->
            <DockPanel Grid.Column="1" Margin="5,10,10,10">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel>
                        <!-- Overlays List Section -->
                        <GroupBox Header="Active Overlays" Margin="0,0,0,10">
                            <StackPanel>
                                <ListBox x:Name="lbOverlays"
                                         Height="100"
                                         Margin="5"
                                         ScrollViewer.HorizontalScrollBarVisibility="Disabled"/>

                                <Button x:Name="btRemove"
                                        Content="Remove Selected"
                                        Height="28"
                                        Margin="5,5,5,5"
                                        FontWeight="Bold"
                                        Click="btRemove_Click"/>
                            </StackPanel>
                        </GroupBox>

                        <!-- Add Overlay Buttons Section -->
                        <GroupBox Header="Add Overlays" Margin="0,0,0,10">
                            <StackPanel Margin="5">
                                <!-- Basic Overlays -->
                                <Label Content="Basic Overlays:" FontWeight="SemiBold" Margin="0,0,0,5"/>
                                <StackPanel Margin="0,0,0,10">
                                    <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
                                        <Button x:Name="btAddText"
                                                Content="Text"
                                                Width="85"
                                                Height="25"
                                                Margin="0,0,5,0"
                                                Click="btAddText_Click"/>

                                        <Button x:Name="btAddScrollingText"
                                                Content="Scrolling Text"
                                                Width="85"
                                                Height="25"
                                                Margin="0,0,5,0"
                                                ToolTip="Add scrolling text (news ticker style)"
                                                Click="btAddScrollingText_Click"/>

                                        <Button x:Name="btAddImage"
                                                Content="Image"
                                                Width="85"
                                                Height="25"
                                                Margin="0,0,5,0"
                                                Click="btAddImage_Click"/>
                                    </StackPanel>
                                    <StackPanel Orientation="Horizontal">
                                        <Button x:Name="btAddImageSequence"
                                                Content="Img Sequence"
                                                Width="85"
                                                Height="25"
                                                Margin="0,0,5,0"
                                                ToolTip="Add image sequence overlay (multiple images cycling)"
                                                Click="btAddImageSequence_Click"/>
                                    </StackPanel>
                                </StackPanel>

                                <!-- Shape Overlays -->
                                <Label Content="Shapes:" FontWeight="SemiBold" Margin="0,0,0,5"/>
                                <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                                    <Button x:Name="btAddLine"
                                            Content="Line"
                                            Width="85"
                                            Height="25"
                                            Margin="0,0,5,0"
                                            Click="btAddLine_Click"/>

                                    <Button x:Name="btAddRectangle"
                                            Content="Rectangle"
                                            Width="85"
                                            Height="25"
                                            Margin="0,0,5,0"
                                            Click="btAddRectangle_Click"/>

                                    <Button x:Name="btAddCircle"
                                            Content="Circle"
                                            Width="85"
                                            Height="25"
                                            Click="btAddCircle_Click"/>
                                </StackPanel>

                                <!-- Media Source Overlays -->
                                <Label Content="Media Sources:" FontWeight="SemiBold" Margin="0,0,0,5"/>
                                <StackPanel Margin="0,0,0,10">
                                    <!-- First row: 3 buttons -->
                                    <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
                                        <Button x:Name="btAddVideo"
                                                Content="Video"
                                                Width="85"
                                                Height="25"
                                                Margin="0,0,5,0"
                                                ToolTip="Add video file overlay"
                                                Click="btAddVideo_Click"/>

                                        <Button x:Name="btAddStream"
                                                Content="Stream"
                                                Width="85"
                                                Height="25"
                                                Margin="0,0,5,0"
                                                ToolTip="Add RTSP/HTTP stream overlay"
                                                Click="btAddStreamOverlay_Click"/>

                                        <Button x:Name="btAddDecklink"
                                                Content="Decklink"
                                                Width="85"
                                                Height="25"
                                                ToolTip="Add Decklink capture device overlay"
                                                Click="btAddDecklink_Click"/>
                                    </StackPanel>

                                    <!-- Second row: 1 button -->
                                    <StackPanel Orientation="Horizontal">
                                        <Button x:Name="btAddNDI"
                                                Content="NDI"
                                                Width="85"
                                                Height="25"
                                                ToolTip="Add NDI network video source overlay"
                                                Click="btAddNDI_Click"/>
                                    </StackPanel>
                                </StackPanel>

                                <!-- Special Overlays -->
                                <Label Content="Special Effects:" FontWeight="SemiBold" Margin="0,0,0,5"/>
                                <StackPanel Margin="0,0,0,5">
                                    <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
                                        <Button x:Name="btAddPiP"
                                                Content="Picture in Picture"
                                                Width="130"
                                                Height="25"
                                                Margin="0,0,5,0"
                                                ToolTip="Add Picture-in-Picture"
                                                Click="btAddPictureInPicture_Click"/>

                                        <Button x:Name="btAddFrameCounter"
                                                Content="Frame Counter"
                                                Width="130"
                                                Height="25"
                                                Click="btAddFrameCounter_Click"/>
                                    </StackPanel>

                                    <Button x:Name="btAddTimeOverlay"
                                            Content="Time Overlay"
                                            Width="130"
                                            Height="25"
                                            Click="btAddTimeOverlay_Click"/>
                                </StackPanel>

                                <!-- WPF Controls -->
                                <Label Content="WPF Controls:" FontWeight="SemiBold" Margin="0,10,0,5"/>
                                <StackPanel Margin="0,0,0,5">
                                    <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
                                        <Button x:Name="btAddWPFClock"
                                                Content="Analog Clock"
                                                Width="85"
                                                Height="25"
                                                Margin="0,0,5,0"
                                                ToolTip="Animated analog clock with rotating hands"
                                                Click="btAddWPFClock_Click"/>

                                        <Button x:Name="btAddWPFPulseBadge"
                                                Content="Pulse Badge"
                                                Width="85"
                                                Height="25"
                                                Margin="0,0,5,0"
                                                ToolTip="Pulsing badge with scale and glow animation"
                                                Click="btAddWPFPulseBadge_Click"/>

                                        <Button x:Name="btAddWPFProgress"
                                                Content="Progress Bar"
                                                Width="85"
                                                Height="25"
                                                ToolTip="Animated progress bar with shimmer effect"
                                                Click="btAddWPFProgress_Click"/>
                                    </StackPanel>
                                    <StackPanel Orientation="Horizontal">
                                        <Button x:Name="btAddWPFColorText"
                                                Content="Color Text"
                                                Width="85"
                                                Height="25"
                                                Margin="0,0,5,0"
                                                ToolTip="Text with cycling color animation"
                                                Click="btAddWPFColorText_Click"/>
                                    </StackPanel>
                                </StackPanel>

                                <!-- Overlay Groups -->
                                <Label Content="Overlay Groups:" FontWeight="SemiBold" Margin="0,10,0,5"/>
                                <StackPanel Margin="0,0,0,5">
                                    <Button x:Name="btAddSyncGroup"
                                            Content="Synchronized Group"
                                            Width="180"
                                            Height="25"
                                            Margin="0,0,0,5"
                                            ToolTip="Add a synchronized overlay group"
                                            Click="btAddSyncGroup_Click"/>
                                    
                                    <TextBlock Text="Groups allow multiple overlays to start synchronously"
                                               TextWrapping="Wrap"
                                               FontSize="10"
                                               Foreground="Gray"
                                               Margin="0,0,0,5"/>
                                </StackPanel>

                                <!-- Video Transform Effects -->
                                <Label Content="Video Transform:" FontWeight="SemiBold" Margin="0,10,0,5"/>
                                <StackPanel Margin="0,0,0,10">
                                    <!-- Zoom Controls -->
                                    <GroupBox Header="Zoom" Margin="0,0,0,5" Padding="5">
                                        <StackPanel>
                                            <Grid Margin="0,0,0,3">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="55"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="40"/>
                                                </Grid.ColumnDefinitions>
                                                <TextBlock Grid.Column="0" Text="Zoom X:" VerticalAlignment="Center"/>
                                                <Slider Grid.Column="1" x:Name="slZoomX" Minimum="0.5" Maximum="4.0" Value="1.0" 
                                                        TickFrequency="0.1" IsSnapToTickEnabled="True"
                                                        ValueChanged="slZoom_ValueChanged"/>
                                                <TextBlock Grid.Column="2" x:Name="lbZoomX" Text="1.0" VerticalAlignment="Center" Margin="5,0,0,0"/>
                                            </Grid>
                                            <Grid Margin="0,0,0,3">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="55"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="40"/>
                                                </Grid.ColumnDefinitions>
                                                <TextBlock Grid.Column="0" Text="Zoom Y:" VerticalAlignment="Center"/>
                                                <Slider Grid.Column="1" x:Name="slZoomY" Minimum="0.5" Maximum="4.0" Value="1.0" 
                                                        TickFrequency="0.1" IsSnapToTickEnabled="True"
                                                        ValueChanged="slZoom_ValueChanged"/>
                                                <TextBlock Grid.Column="2" x:Name="lbZoomY" Text="1.0" VerticalAlignment="Center" Margin="5,0,0,0"/>
                                            </Grid>
                                            <Grid Margin="0,0,0,3">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="55"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="40"/>
                                                </Grid.ColumnDefinitions>
                                                <TextBlock Grid.Column="0" Text="Shift X:" VerticalAlignment="Center"/>
                                                <Slider Grid.Column="1" x:Name="slShiftX" Minimum="-500" Maximum="500" Value="0" 
                                                        TickFrequency="10" IsSnapToTickEnabled="True"
                                                        ValueChanged="slZoom_ValueChanged"/>
                                                <TextBlock Grid.Column="2" x:Name="lbShiftX" Text="0" VerticalAlignment="Center" Margin="5,0,0,0"/>
                                            </Grid>
                                            <Grid Margin="0,0,0,3">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="55"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="40"/>
                                                </Grid.ColumnDefinitions>
                                                <TextBlock Grid.Column="0" Text="Shift Y:" VerticalAlignment="Center"/>
                                                <Slider Grid.Column="1" x:Name="slShiftY" Minimum="-500" Maximum="500" Value="0" 
                                                        TickFrequency="10" IsSnapToTickEnabled="True"
                                                        ValueChanged="slZoom_ValueChanged"/>
                                                <TextBlock Grid.Column="2" x:Name="lbShiftY" Text="0" VerticalAlignment="Center" Margin="5,0,0,0"/>
                                            </Grid>
                                            <StackPanel Orientation="Horizontal" Margin="0,5,0,0">
                                                <CheckBox x:Name="cbZoomEnabled" Content="Enable" 
                                                          Checked="cbZoomEnabled_CheckedChanged" 
                                                          Unchecked="cbZoomEnabled_CheckedChanged"
                                                          Margin="0,0,10,0"/>
                                                <Button x:Name="btZoomReset" Content="Reset" Width="60" Height="22" Click="btZoomReset_Click"/>
                                            </StackPanel>
                                        </StackPanel>
                                    </GroupBox>
                                    
                                    <!-- Pan/Ken Burns Controls -->
                                    <GroupBox Header="Pan (Ken Burns Effect)" Padding="5">
                                        <StackPanel>
                                            <TextBlock Text="Start Rectangle:" FontWeight="SemiBold" Margin="0,0,0,3"/>
                                            <Grid Margin="0,0,0,3">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="25"/>
                                                    <ColumnDefinition Width="50"/>
                                                    <ColumnDefinition Width="25"/>
                                                    <ColumnDefinition Width="50"/>
                                                    <ColumnDefinition Width="25"/>
                                                    <ColumnDefinition Width="50"/>
                                                    <ColumnDefinition Width="25"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>
                                                <TextBlock Grid.Column="0" Text="X:" VerticalAlignment="Center"/>
                                                <TextBox Grid.Column="1" x:Name="edPanStartX" Text="0" VerticalAlignment="Center"/>
                                                <TextBlock Grid.Column="2" Text="Y:" VerticalAlignment="Center" Margin="5,0,0,0"/>
                                                <TextBox Grid.Column="3" x:Name="edPanStartY" Text="0" VerticalAlignment="Center"/>
                                                <TextBlock Grid.Column="4" Text="W:" VerticalAlignment="Center" Margin="5,0,0,0"/>
                                                <TextBox Grid.Column="5" x:Name="edPanStartW" Text="0" VerticalAlignment="Center" ToolTip="0 = full width"/>
                                                <TextBlock Grid.Column="6" Text="H:" VerticalAlignment="Center" Margin="5,0,0,0"/>
                                                <TextBox Grid.Column="7" x:Name="edPanStartH" Text="0" VerticalAlignment="Center" ToolTip="0 = full height"/>
                                            </Grid>
                                            <TextBlock Text="Stop Rectangle:" FontWeight="SemiBold" Margin="0,5,0,3"/>
                                            <Grid Margin="0,0,0,3">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="25"/>
                                                    <ColumnDefinition Width="50"/>
                                                    <ColumnDefinition Width="25"/>
                                                    <ColumnDefinition Width="50"/>
                                                    <ColumnDefinition Width="25"/>
                                                    <ColumnDefinition Width="50"/>
                                                    <ColumnDefinition Width="25"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>
                                                <TextBlock Grid.Column="0" Text="X:" VerticalAlignment="Center"/>
                                                <TextBox Grid.Column="1" x:Name="edPanStopX" Text="100" VerticalAlignment="Center"/>
                                                <TextBlock Grid.Column="2" Text="Y:" VerticalAlignment="Center" Margin="5,0,0,0"/>
                                                <TextBox Grid.Column="3" x:Name="edPanStopY" Text="100" VerticalAlignment="Center"/>
                                                <TextBlock Grid.Column="4" Text="W:" VerticalAlignment="Center" Margin="5,0,0,0"/>
                                                <TextBox Grid.Column="5" x:Name="edPanStopW" Text="640" VerticalAlignment="Center"/>
                                                <TextBlock Grid.Column="6" Text="H:" VerticalAlignment="Center" Margin="5,0,0,0"/>
                                                <TextBox Grid.Column="7" x:Name="edPanStopH" Text="480" VerticalAlignment="Center"/>
                                            </Grid>
                                            <Grid Margin="0,5,0,3">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="60"/>
                                                    <ColumnDefinition Width="50"/>
                                                    <ColumnDefinition Width="60"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>
                                                <TextBlock Grid.Column="0" Text="Duration:" VerticalAlignment="Center"/>
                                                <TextBox Grid.Column="1" x:Name="edPanDuration" Text="5" VerticalAlignment="Center" ToolTip="Duration in seconds"/>
                                                <TextBlock Grid.Column="2" Text="Easing:" VerticalAlignment="Center" Margin="10,0,0,0"/>
                                                <ComboBox Grid.Column="3" x:Name="cbPanEasing" VerticalAlignment="Center">
                                                    <ComboBoxItem Content="Linear" IsSelected="True"/>
                                                    <ComboBoxItem Content="EaseIn"/>
                                                    <ComboBoxItem Content="EaseOut"/>
                                                    <ComboBoxItem Content="EaseInOut"/>
                                                </ComboBox>
                                            </Grid>
                                            <StackPanel Orientation="Horizontal" Margin="0,5,0,0">
                                                <Button x:Name="btPanAdd" Content="Add Pan" Width="70" Height="22" Click="btPanAdd_Click" Margin="0,0,5,0"/>
                                                <Button x:Name="btPanPreset1" Content="Zoom In" Width="60" Height="22" Click="btPanPreset1_Click" Margin="0,0,5,0" ToolTip="Full frame to center crop"/>
                                                <Button x:Name="btPanPreset2" Content="Zoom Out" Width="60" Height="22" Click="btPanPreset2_Click" ToolTip="Center crop to full frame"/>
                                            </StackPanel>
                                        </StackPanel>
                                    </GroupBox>
                                    
                                    <!-- Fade In/Out Controls -->
                                    <GroupBox Header="Fade Effects" Padding="5" Margin="0,5,0,0">
                                        <StackPanel>
                                            <Grid Margin="0,0,0,5">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="70"/>
                                                    <ColumnDefinition Width="50"/>
                                                    <ColumnDefinition Width="60"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>
                                                <TextBlock Grid.Column="0" Text="Duration:" VerticalAlignment="Center"/>
                                                <TextBox Grid.Column="1" x:Name="edFadeDuration" Text="2" VerticalAlignment="Center" ToolTip="Fade duration in seconds"/>
                                                <TextBlock Grid.Column="2" Text="Easing:" VerticalAlignment="Center" Margin="10,0,0,0"/>
                                                <ComboBox Grid.Column="3" x:Name="cbFadeEasing" VerticalAlignment="Center">
                                                    <ComboBoxItem Content="Linear" IsSelected="True"/>
                                                    <ComboBoxItem Content="EaseIn"/>
                                                    <ComboBoxItem Content="EaseOut"/>
                                                    <ComboBoxItem Content="EaseInOut"/>
                                                </ComboBox>
                                            </Grid>
                                            <StackPanel Orientation="Horizontal" Margin="0,5,0,0">
                                                <Button x:Name="btFadeIn" Content="Add Fade In" Width="85" Height="22" Click="btFadeIn_Click" Margin="0,0,5,0" ToolTip="Fade from black to video (starts now)"/>
                                                <Button x:Name="btFadeOut" Content="Add Fade Out" Width="85" Height="22" Click="btFadeOut_Click" ToolTip="Fade from video to black (starts now)"/>
                                            </StackPanel>
                                        </StackPanel>
                                    </GroupBox>
                                </StackPanel>
                            </StackPanel>
                        </GroupBox>

                        <!-- Debug Section -->
                        <GroupBox Header="Debug">
                            <StackPanel Margin="5">
                                <CheckBox x:Name="cbDebugMode"
                                          Content="Enable Debug Mode"
                                          Margin="0,0,0,5"/>

                                <Label Content="Log Output:" Margin="0,5,0,2"/>
                                <TextBox x:Name="edLog"
                                         Height="80"
                                         TextWrapping="Wrap"
                                         VerticalScrollBarVisibility="Auto"
                                         HorizontalScrollBarVisibility="Auto"
                                         FontFamily="Consolas"
                                         FontSize="11"/>
                            </StackPanel>
                        </GroupBox>
                    </StackPanel>
                </ScrollViewer>
            </DockPanel>
        </Grid>
    </DockPanel>
</Window>